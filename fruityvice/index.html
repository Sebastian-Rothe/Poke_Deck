<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .card {
          border: 1px solid #ccc;
          border-radius: 5px;
          padding: 20px;
          margin: 10px;
          box-shadow: 0 0 10px rgba(0,0,0,0.1);
      }
    </style>
    <script>
      let pronError = false; // kein errror
      
      function getPromise() {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            if (pronError) {
              reject("That didn't work!");
            } else {
              resolve("That worked!");
            }
          }, 200);
        });
      }
      // async function fetchDataJson() {
      //   let response = await fetch("https://www.fruityvice.com/api/fruit/all");
      //   if (!response.ok) {
      //       throw new Error('Network response was not ok');
      //   }

      //   let responseAsJson = await response.json();
      //   for (let i = 0; i < responseAsJson.length; i++) {
      //   let cardsContainer = document.getElementById('cards-container');
      //   cardsContainer.innerHTML = '';

      //   const item = responseAsJson[i];
      //   console.log(item);

      //   for (let j = 0; j < item.length; j++) {
      //       const element = item[j];
      //       element = element.nutritions;
      //       console.log(element);
            
      //   }
      //   fruitList.innerHTML += `<li>${item.nutritions.calories}</li>`;
      //  }
      //   // console.log(responseAsJson);    
      // }
      async function fetchDataJson() {
    try {
        let response = await fetch("https://www.fruityvice.com/api/fruit/all");
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }

        let responseAsJson = await response.json();
        let cardsContainer = document.getElementById('cards-container');
        cardsContainer.innerHTML = ''; // Sicherstellen, dass der Container leer ist, bevor er gefÃ¼llt wird

        responseAsJson.forEach(fruit => {
            let card = document.createElement('div');
            card.className = 'card';
            
            let fruitName = document.createElement('h2');
            fruitName.textContent = fruit.name;
            
            let calories = document.createElement('p');
            calories.textContent = `Calories: ${fruit.nutritions.calories}`;
            
            let sugar = document.createElement('p');
            sugar.textContent = `Sugar: ${fruit.nutritions.sugar}g`;
            
            let carbohydrates = document.createElement('p');
            carbohydrates.textContent = `Carbohydrates: ${fruit.nutritions.carbohydrates}g`;

            let protein = document.createElement('p');
            protein.textContent = `Protein: ${fruit.nutritions.protein}g`;

            let fat = document.createElement('p');
            fat.textContent = `Fat: ${fruit.nutritions.fat}g`;
            
            card.appendChild(fruitName);
            card.appendChild(calories);
            card.appendChild(sugar);
            card.appendChild(carbohydrates);
            card.appendChild(protein);
            card.appendChild(fat);
            cardsContainer.appendChild(card);
        });

        console.log(responseAsJson);
    } catch (error) {
        console.error('Fetch error:', error);
    }
}

      async function getFruit(){
        
        try {
            let prom = await getPromise();
            let fruits = await fetchDataJson();

            if (fruits === null) {
                console.log('failed to fetch fruits');
                return;
            }
        } catch (error){
            console.error('error', error);
        }
      }
    </script>
  </head>
  <body onload="getFruit()">
    <div id="container"></div>
    <h1>Fruits List</h1>
    <ul id="fruit-list"></ul>
    <div id="cards-container"></div>

  </body>
</html>
